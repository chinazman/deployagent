<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>部署代理 - 登录</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#0b1020;color:#e6e9ef}
    .card{width:360px;background:#121a2b;border:1px solid #1d2742;border-radius:12px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    input,select,button,textarea{width:100%;padding:10px 12px;margin-top:8px;background:#0e1627;border:1px solid #263454;border-radius:8px;color:#e6e9ef}
    button{cursor:pointer;background:#2e5bff;border:0}
    h1{font-size:18px;margin:0 0 8px}
    .muted{color:#9aa4b2;font-size:12px}
  </style>
  <script>
    // 计算基础路径：取到 "/web/" 之前的路径作为 __BASE_PATH__（如 "/deployagent"），根路径则为空串
    (function(){
      var p=location.pathname; var i=p.indexOf('/web/');
      window.__BASE_PATH__ = i>=0 ? p.slice(0,i) : '';
    })();
  </script>
  <script>
    async function login(e){
      e.preventDefault();
      const username=document.getElementById('username').value;
      const password=document.getElementById('password').value;
      const base=(window.__BASE_PATH__||'')
      const r=await fetch(base+'/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});
      if(r.ok){location.href=base+'/web/app.html'}else{alert('登录失败')}
    }
  </script>
</head>
<body>
  <div class="card">
    <h1>部署代理 登录</h1>
    <form onsubmit="login(event)">
      <label>用户名</label>
      <input id="username" required />
      <label>密码</label>
      <input id="password" type="password" required />
      <button type="submit" style="margin-top:12px">登录</button>
    </form>
    <p class="muted">使用配置文件中的用户名和密码</p>
  </div>
</body>
</html>


